{
  "info": {
    "license": {
      "name": "Apache 2.0",
      "url": "https://www.apache.org/licenses/LICENSE-2.0.html"
    },
    "title": "Policy Activations",
    "version": "v2"
  },
  "openapi": "3.0.0",
  "paths": {
    "/policies/{policyId}/activations": {
      "get": {
        "description": "Returns the activation history for the policy. The policy activation history provides results for each property where the policy applies dating back up to one year. If no activations occurred within the year, only the latest activation data is returned.\n",
        "operationId": "get-policy-activations",
        "parameters": [
          {
            "description": "The selected network, either `staging` or `prod`.\n",
            "in": "query",
            "name": "network",
            "schema": {
              "type": "string",
              "enum": [
                "staging",
                "prod"
              ],
              "example": "staging"
            }
          },
          {
            "description": "Returns only activations for the selected property.\n",
            "in": "query",
            "name": "propertyName",
            "schema": {
              "type": "string",
              "example": "www.example.org"
            }
          },
          {
            "description": "When requesting pages of data, `offset` is the record after which to start. Use `offset` with `pageSize`. For example: offset=25&pageSize=15 starts at record 26 and displays up to 15 records for each property the policy applies to.\n",
            "in": "query",
            "name": "offset",
            "required": false,
            "schema": {
              "default": 0,
              "minimum": 0,
              "example": 25,
              "type": "integer"
            }
          },
          {
            "description": "The number of records to return. Use with `offset` to manage the number of records returned.\n",
            "in": "query",
            "name": "pageSize",
            "required": false,
            "schema": {
              "default": 100,
              "maximum": 1000,
              "minimum": 5,
              "example": 15,
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "example": [
                  {
                    "serviceVersion": null,
                    "apiVersion": "2.0",
                    "network": "staging",
                    "policyInfo": {
                      "policyId": 2962,
                      "name": "RequestControlPolicy",
                      "version": 1,
                      "status": "ACTIVE",
                      "statusDetail": "File successfully deployed to Akamai's network",
                      "detailCode": 4000,
                      "activatedBy": "jdupont",
                      "activationDate": 1427428800000
                    },
                    "propertyInfo": {
                      "name": "www.rc-cloudlet.com",
                      "version": 0,
                      "groupId": 54321,
                      "status": "INACTIVE",
                      "activatedBy": null,
                      "activationDate": 0
                    }
                  }
                ],
                "schema": {
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "description": "Returns details of a policy activation.\n",
                    "required": [
                      "network",
                      "policyInfo",
                      "propertyInfo"
                    ],
                    "properties": {
                      "network": {
                        "type": "string",
                        "description": "The network, either `STAGING`, `PRODUCTION`, or `prod` as shorthand, on which a load balancing configuration for Application Load Balancer has been activated. Values are case-insensitive in requests.\n",
                        "enum": [
                          "prod",
                          "staging"
                        ]
                      },
                      "policyInfo": {
                        "type": "object",
                        "additionalProperties": false,
                        "description": "Returns details of a policy associated with policy activation.\n",
                        "required": [
                          "policyId",
                          "name",
                          "version",
                          "status",
                          "statusDetail",
                          "activatedBy",
                          "activationDate"
                        ],
                        "properties": {
                          "policyId": {
                            "type": "integer",
                            "description": "ID of the policy.\n"
                          },
                          "name": {
                            "type": "string",
                            "description": "Name of the policy.\n"
                          },
                          "version": {
                            "type": "integer",
                            "description": "Version of the policy.\n"
                          },
                          "status": {
                            "type": "string",
                            "description": "Value representing activation status.\n",
                            "enum": [
                              "INACTIVE",
                              "PENDING",
                              "ACTIVE",
                              "FAILED",
                              "DEACTIVATED"
                            ]
                          },
                          "statusDetail": {
                            "type": "string",
                            "description": "Details of the activation status.\n"
                          },
                          "activatedBy": {
                            "type": "string",
                            "description": "User name who issued the activation.\n"
                          },
                          "activationDate": {
                            "type": "integer",
                            "description": "Date of the activation in milliseconds.\n"
                          }
                        }
                      },
                      "propertyInfo": {
                        "type": "object",
                        "additionalProperties": false,
                        "description": "Returns details of a property associated with policy activation.\n",
                        "required": [
                          "name",
                          "version",
                          "groupId",
                          "status",
                          "activatedBy",
                          "activationDate",
                          "id"
                        ],
                        "properties": {
                          "name": {
                            "type": "string",
                            "description": "Name of the property.\n"
                          },
                          "version": {
                            "type": "integer",
                            "description": "Version of the property.\n"
                          },
                          "groupId": {
                            "type": "integer",
                            "description": "Identifies the group where the property is placed.\n"
                          },
                          "status": {
                            "type": "string",
                            "description": "Value representing activation status.\n",
                            "enum": [
                              "INACTIVE",
                              "PENDING",
                              "ACTIVE",
                              "FAILED",
                              "DEACTIVATED"
                            ]
                          },
                          "activatedBy": {
                            "type": "string",
                            "description": "User name who issued the activation.\n"
                          },
                          "activationDate": {
                            "type": "integer",
                            "description": "Date of the activation in milliseconds.\n"
                          },
                          "id": {
                            "type": "integer",
                            "description": "ID of the property.\n"
                          }
                        }
                      },
                      "apiVersion": {
                        "type": "string",
                        "description": "The specific version of this API.\n"
                      },
                      "serviceVersion": {
                        "type": "string",
                        "nullable": true,
                        "description": "The build of the software running on the server. The value can be `null`.\n",
                        "x-akamai": {
                          "status": "DEPRECATED"
                        }
                      }
                    }
                  },
                  "type": "array",
                  "description": "Returns policy and property activation details.\n"
                }
              }
            },
            "description": "Returns the policy's activation history.\n"
          }
        },
        "summary": "List policy activations",
        "tags": [
          "Policy activations"
        ]
      },
      "parameters": [
        {
          "description": "The ID of the policy.\n",
          "in": "path",
          "name": "policyId",
          "required": true,
          "schema": {
            "example": 1001,
            "type": "integer"
          },
          "x-akamai": {
            "file-path": "parameters/policyId-path.yaml"
          }
        }
      ]
    },
    "/policies/{policyId}/versions/{version}/activations": {
      "parameters": [
        {
          "description": "The version number of the policy.\n",
          "in": "path",
          "name": "version",
          "required": true,
          "schema": {
            "example": 2,
            "type": "number"
          },
          "x-akamai": {
            "file-path": "parameters/version-path.yaml"
          }
        },
        {
          "description": "The ID of the policy.\n",
          "in": "path",
          "name": "policyId",
          "required": true,
          "schema": {
            "example": 1001,
            "type": "integer"
          },
          "x-akamai": {
            "file-path": "parameters/policyId-path.yaml"
          }
        }
      ],
      "post": {
        "description": "Activate the selected cloudlet policy version.  After activation completes, the Cloudlets policy is ready for use.\n",
        "operationId": "post-policy-version-activations",
        "parameters": [
          {
            "description": "Set `async` to `true` for policy activations on multiple properties to reduce API response time and let the policy activation continue asynchronously in the background. Default is `false`.\n",
            "in": "query",
            "name": "async",
            "schema": {
              "default": false,
              "example": true,
              "type": "boolean"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "example": {
                "network": "staging",
                "additionalPropertyNames": [
                  "Ion-Premier-Demo-Property"
                ]
              },
              "schema": {
                "type": "object",
                "additionalProperties": false,
                "description": "TBD.\n",
                "properties": {
                  "additionalPropertyNames": {
                    "items": {
                      "type": "string"
                    },
                    "type": "array",
                    "description": "An array of one or more additional properties that you want to activate with the Cloudlet policy. Once activated, the property and policy are permanently linked.\n"
                  },
                  "network": {
                    "enum": [
                      "prod",
                      "staging"
                    ],
                    "type": "string",
                    "description": "The network, either `STAGING`, `PRODUCTION`, or `prod` as shorthand, on which a load balancing configuration for Application Load Balancer has been activated. Values are case-insensitive in requests.\n"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "example": [
                  {
                    "serviceVersion": null,
                    "apiVersion": "2.0",
                    "network": "staging",
                    "policyInfo": {
                      "policyId": 2962,
                      "name": "RequestControlPolicy",
                      "version": 1,
                      "status": "ACTIVE",
                      "statusDetail": "File successfully deployed to Akamai's network",
                      "detailCode": 4000,
                      "activatedBy": "jkowalski",
                      "activationDate": 1427428800000
                    },
                    "propertyInfo": {
                      "name": "www.rc-cloudlet.com",
                      "version": 0,
                      "groupId": 12345,
                      "status": "INACTIVE",
                      "activatedBy": null,
                      "activationDate": 0
                    }
                  }
                ],
                "schema": {
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "description": "Returns details of a policy activation.\n",
                    "required": [
                      "network",
                      "policyInfo",
                      "propertyInfo"
                    ],
                    "properties": {
                      "network": {
                        "type": "string",
                        "description": "The network, either `STAGING`, `PRODUCTION`, or `prod` as shorthand, on which a load balancing configuration for Application Load Balancer has been activated. Values are case-insensitive in requests.\n",
                        "enum": [
                          "prod",
                          "staging"
                        ]
                      },
                      "policyInfo": {
                        "type": "object",
                        "additionalProperties": false,
                        "description": "Returns details of a policy associated with policy activation.\n",
                        "required": [
                          "policyId",
                          "name",
                          "version",
                          "status",
                          "statusDetail",
                          "activatedBy",
                          "activationDate"
                        ],
                        "properties": {
                          "policyId": {
                            "type": "integer",
                            "description": "ID of the policy.\n"
                          },
                          "name": {
                            "type": "string",
                            "description": "Name of the policy.\n"
                          },
                          "version": {
                            "type": "integer",
                            "description": "Version of the policy.\n"
                          },
                          "status": {
                            "type": "string",
                            "description": "Value representing activation status.\n",
                            "enum": [
                              "INACTIVE",
                              "PENDING",
                              "ACTIVE",
                              "FAILED",
                              "DEACTIVATED"
                            ]
                          },
                          "statusDetail": {
                            "type": "string",
                            "description": "Details of the activation status.\n"
                          },
                          "activatedBy": {
                            "type": "string",
                            "description": "User name who issued the activation.\n"
                          },
                          "activationDate": {
                            "type": "integer",
                            "description": "Date of the activation in milliseconds.\n"
                          }
                        }
                      },
                      "propertyInfo": {
                        "type": "object",
                        "additionalProperties": false,
                        "description": "Returns details of a property associated with policy activation.\n",
                        "required": [
                          "name",
                          "version",
                          "groupId",
                          "status",
                          "activatedBy",
                          "activationDate",
                          "id"
                        ],
                        "properties": {
                          "name": {
                            "type": "string",
                            "description": "Name of the property.\n"
                          },
                          "version": {
                            "type": "integer",
                            "description": "Version of the property.\n"
                          },
                          "groupId": {
                            "type": "integer",
                            "description": "Identifies the group where the property is placed.\n"
                          },
                          "status": {
                            "type": "string",
                            "description": "Value representing activation status.\n",
                            "enum": [
                              "INACTIVE",
                              "PENDING",
                              "ACTIVE",
                              "FAILED",
                              "DEACTIVATED"
                            ]
                          },
                          "activatedBy": {
                            "type": "string",
                            "description": "User name who issued the activation.\n"
                          },
                          "activationDate": {
                            "type": "integer",
                            "description": "Date of the activation in milliseconds.\n"
                          },
                          "id": {
                            "type": "integer",
                            "description": "ID of the property.\n"
                          }
                        }
                      },
                      "apiVersion": {
                        "type": "string",
                        "description": "The specific version of this API.\n"
                      },
                      "serviceVersion": {
                        "type": "string",
                        "nullable": true,
                        "description": "The build of the software running on the server. The value can be `null`.\n",
                        "x-akamai": {
                          "status": "DEPRECATED"
                        }
                      }
                    }
                  },
                  "type": "array",
                  "description": "Returns policy and property activation details.\n"
                }
              }
            },
            "description": "Returns the activation history for the policy.\n"
          }
        },
        "summary": "Activate a policy version",
        "tags": [
          "Policy activations"
        ]
      }
    }
  },
  "servers": [
    {
      "url": "https://{hostname}/cloudlets/api/v2"
    }
  ],
  "x-akamai": {
    "auth-type": "EDGE_GRID",
    "file-path": "policy-activations.yaml"
  }
}

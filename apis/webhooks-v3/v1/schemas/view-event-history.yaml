type: object
description: |
  Returns the event history for a webhooks event. This operation works against the Identity Cloud event store and not against your organization’s webhooks database. Events remain in the event store for seven days before Webhooks v3 automatically deletes the events.
x-akamai:
  file-path: schemas/view-event-history.yaml
additionalProperties: true
required:
- total
properties:
  _embedded:
    type: object
    description: |
      Properties and property values for the event history.
    additionalProperties: false
    required:
    - events
    properties:
      events:
        type: array
        description: |
          Event history for an event.
        minItems: 1
        items:
          type: object
          additionalProperties: false
          required:
          - id
          - createdAt
          - updatedAt
          - state
          - attempts
          - request
          properties:
            id:
              type: string
              description: |
                Unique identifier of a Webhooks v3 event.
              minLength: 1
            attempts:
              type: integer
              description: |
                Number of times that Webhooks v3 has sent the event notification.  After six unsuccessful delivery tries the service marks the event as `failure` and makes no further delivery attempts. To retrieve this event, schedule it for redelivery by using the [Redeliver an event](https://techdocs.akamai.com/identity-cloud-webhooks/reference/post-webhooks-redelivery) operation.
              minimum: 0
            createdAt:
              type: string
              description: |
                Timestamp indicating the event's creation date.
              format: date-time
            eventType:
              type: string
              description: |
                Identity Cloud events that trigger webhook event notifications. Possible values are: `entityCreated`, `entityDeleted`, and `entityUpdated`. An `entityCreated` event occurs when a user creates an account. An `entityDeleted` event occurs when a user deletes an account.An  `entityUpdated` event occurs when a user modifies an account. You can also add a filter to your subscription to allow for more fine-grain notifications. See [Create a webhook event filter](https://techdocs.akamai.com/identity-cloud/docs/create-a-webhooks-v3-event-filter) for more information.
              enum:
              - entityCreated
              - entityDeleted
              - entityUpdated
              minLength: 1
            request:
              type: object
              description: |
                Information about the request after the successful delivery of an event. A `null` value means the event is awaiting delivery.
              additionalProperties: false
              required:
              - endpoint
              - headers
              nullable: true
              properties:
                headers:
                  type: object
                  description: |
                    HTTP headers and header values.
                  additionalProperties: false
                  required:
                  - Accept
                  - Content-Type
                  - Host
                  - User-Agent
                  properties:
                    Accept:
                      type: string
                      description: |
                        Valid data types for the request. A value of `*/*` means that the response can use any data type.
                      minLength: 1
                    Content-Length:
                      type: string
                      description: |
                        Number of bytes in the request. This header helps the listener endpoint determine when the message transmission is complete.
                      minLength: 1
                    Content-Type:
                      type: string
                      description: |
                        Type of content in the request. A value of `*/*` means that the request can use any data type.
                      minLength: 1
                    Host:
                      type: string
                      description: |
                        Domain name of the listener endpoint. Listener endpoints receive and process event notifications.
                      minLength: 1
                    User-Agent:
                      type: string
                      description: |
                        Entity responsible for sending event notification. This is typically `Akamai Identity Cloud Webhooks/v3.0.0`.
                      minLength: 1
                endpoint:
                  type: string
                  description: |
                    URL of the Webhooks listener endpoint. You set up and maintain listener endpoints on your network to receive and process the event notifications sent by Webhooks v3. See [Configure a webhook listener endpoint](https://techdocs.akamai.com/identity-cloud/docs/configure-a-webhooks-v3-listener-endpoint) for information on configuring your listener endpoint URL.
                  minLength: 1
                payload:
                  type: string
                  description: |
                    Security event token containing the event details.
                  minLength: 1
            response:
              type: object
              description: |
                Information about the response following the successful delivery of an event. A `null` value means the event is awaiting delivery.
              additionalProperties: false
              required:
              - statusCode
              - headers
              nullable: true
              properties:
                headers:
                  type: object
                  description: |
                    HTTP headers in the response.
                  additionalProperties: false
                  required:
                  - Cache-Control
                  - Content-Type
                  - Date
                  - Server
                  - Set-Cookie
                  - Vary
                  - X-Request-Id
                  - X-Token-Id
                  properties:
                    Cache-Control:
                      type: string
                      description: |
                        Indicates whether browsers can cache the response. Because Webhooks v3 doesn't use caching, this needs to be set to `no-cache, private`.
                      minLength: 1
                    Content-Length:
                      type: string
                      description: |
                        Number of bytes in the response. This header helps the listener endpoint determine when the message transmission is complete.
                      minLength: 1
                    Content-Type:
                      type: string
                      description: |
                        Type of content in the response. A value of `secevent+jwt` defines the transmission as a security event token.
                      minLength: 1
                    Date:
                      type: string
                      description: |
                        Timestamp indicating when the response was sent. Note that the time of day is Greenwich Mean Time and not your local time.
                      minLength: 1
                    Server:
                      type: string
                      description: |
                        Helps identity the operating system and other software characteristics of the listener endpoint.
                      minLength: 1
                    Set-Cookie:
                      type: string
                      description: |
                        Cookie that identifies the webhooks session.
                      minLength: 1
                    Vary:
                      type: string
                      description: |
                        Indicates whether new requests for the same resource come from the cache. For webhook requests the value of this header needs to be `Accept-Encoding`.
                      minLength: 1
                    X-Request-Id:
                      type: string
                      description: |
                        Unique identifier of the request.
                      minLength: 1
                    X-Token-Id:
                      type: string
                      description: |
                        Unique identifier of the session.
                      minLength: 1
                statusCode:
                  type: integer
                  description: |
                    HTTP status code for the response.
                  minimum: 100
            state:
              type: string
              description: |
                Current state of the event. Valid values are: ||- `awaiting-executing`. The event notification hasn’t been sent. |- `executing`. The delivery is in process. |- `success`. Event delivery was successful. |- `awaiting-retry`. At least one delivery attempt didn't succeed and the event is awaiting the next delivery try. |- `failure`. Webhooks v3 couldn't deliver the event. To retrieve this event, schedule it for redelivery by using the [Redeliver an event](https://techdocs.akamai.com/identity-cloud-webhooks/reference/post-webhooks-redelivery) operation.
              enum:
              - awaiting-scheduling
              - awaiting-executing
              - executing
              - success
              - awaiting-retry
              - failure
              minLength: 1
            updatedAt:
              type: string
              description: |
                Timestamp indicating the event's last update time..
              format: date-time
  _links:
    type: object
    description: |
      Navigable hypermedia links for the event history.
    additionalProperties: false
    required:
    - self
    properties:
      redeliver:
        type: object
        description: |
          Navigable hypermedia links for rescheduling delivery of a `failure` event.
        additionalProperties: false
        required:
        - href
        properties:
          href:
            type: string
            description: |
              Navigable hypermedia link for scheduling a `failure` event for redelivery.
            minLength: 1
      self:
        type: object
        description: |
          Navigable hypermedia links for the event.
        additionalProperties: false
        required:
        - href
        properties:
          href:
            type: string
            description: |
              Navigable hypermedia link for accessing the event.
            minLength: 1
  total:
    type: integer
    description: |
      Total number of entries for the event. Each entry represents a different event state the event has passed through.
    minimum: 1

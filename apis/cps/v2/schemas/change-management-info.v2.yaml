type: object
description: |-
  After you create an enrollment, you can have CPS halt deployment when the certificate becomes available, so that you can test and view the certificate on a staging server prior to deployment in the production network. If you do not want CPS to automatically deploy the certificate to the production network after it receives the signed certificate from the CA, you can turn change management on for the enrollment. This stops CPS from deploying the certificate to the network until you acknowledge that you are ready to deploy the certificate.
  
x-akamai:
  file-path: schemas/change-management-info.v2.yaml
additionalProperties: false
required:
- pendingState
- validationResultHash
properties:
  acknowledgementDeadline:
    type: string
    description: |
      ISO 8601 timestamp for the user's deadline to acknowledge the change management validation result, before CPS attempts to deploy the pending state to the live network. The value is `null` if there's no existing certificate on the network for the current enrollment.
    nullable: true
    minLength: 1
  pendingState:
    type: object
    description: |
      The snapshot of the pending state for the enrollment when this change takes effect.
    additionalProperties: false
    required:
    - pendingNetworkConfiguration
    properties:
      pendingCertificate:
        type: object
        description: |
          The snapshot of the pending certificate for the enrollment when this change takes effect.
        additionalProperties: false
        required:
        - certificateType
        - fullCertificate
        - signatureAlgorithm
        properties:
          certificateType:
            type: string
            description: |
              Either `san`, `single`, `wildcard`, `wildcard-san`, or `third-party`.
            enum:
            - san
            - single
            - wildcard
            - wildcard-san
            - third-party
          fullCertificate:
            type: string
            description: |
              Displays the contents of the certificate.
            minLength: 1
          signatureAlgorithm:
            type: string
            description: |
              Displays the signature algorithm. Either `SHA-1` or `SHA-256`.
            nullable: true
            enum:
            - SHA-1
            - SHA-256
      pendingNetworkConfiguration:
        type: object
        description: |
          The snapshot of the pending network configuration for the enrollment when this change takes effect.
        additionalProperties: false
        required:
        - mustHaveCiphers
        - preferredCiphers
        properties:
          disallowedTlsVersions:
            type: array
            description: |
              Disallowed TLS protocols.
            minItems: 0
            items:
              type: string
              minLength: 1
          mustHaveCiphers:
            type: string
            description: |
              Ciphers that you want to include for your enrollment while deploying it on the network. Defaults to `ak-akamai-default`.
            default: ak-akamai-default
            minLength: 1
          networkType:
            type: string
            description: |
              Enrollment network type.
            nullable: true
            minLength: 1
          preferredCiphers:
            type: string
            description: |
              Ciphers you want to include for your enrollment while deploying it on the network. Defaults to `ak-akamai-default`.
            default: ak-akamai-default
            minLength: 1
          sni:
            type: object
            description: |
              Server Name Indication (SNI) setting for this enrollment.
            additionalProperties: false
            required:
            - cloneDnsNames
            nullable: true
            properties:
              cloneDnsNames:
                type: boolean
                description: |
                  When `true`, all certificate SANs are included in `dnsNames`.
              dnsNames:
                type: array
                description: |
                  Names served by SNI-only enabled enrollments.
                nullable: true
                minItems: 0
                items:
                  type: string
                  minLength: 1
  validationResult:
    type: object
    description: |
      Provides information about the hash's most recent validation check, indicating the change's current job state. This object appears in the response, even when its value is `null`. Before you run the [Update a change](ref:post-change-allowed-input-param) operation, review the change's validation results and resolve any issues.
    additionalProperties: false
    required:
    - errors
    - warnings
    properties:
      errors:
        type: array
        description: |
          Validation errors of the current job state. Errors prevent a change from proceeding until you resolve them. They are optional and only appear if there are any errors.
        nullable: true
        minItems: 0
        items:
          type: object
          additionalProperties: false
          required:
          - message
          - messageCode
          properties:
            message:
              type: string
              description: |
                The description of the message.
              minLength: 1
            messageCode:
              type: string
              description: |
                The unique code of the message.
              minLength: 1
      warnings:
        type: array
        description: |
          Validation warnings of the current job state. Warnings suspend the execution of a change. You can acknowledge or deny warnings. If you acknowledge them, the change proceeds with its operation. They are optional and only appear if there are any warnings.
        minItems: 0
        items:
          type: object
          additionalProperties: false
          required:
          - message
          - messageCode
          properties:
            message:
              type: string
              description: |
                The description of the message.
              minLength: 1
            messageCode:
              type: string
              description: |
                The unique code of the message.
              minLength: 1
  validationResultHash:
    type: string
    description: |
      The hash of `validationResult`.
    minLength: 1
